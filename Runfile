require "runfile-tasks"
require 'fileutils'
require 'nicetrace'
require 'nicetrace/rescue'


title   "Nicetrace Developer Toolbelt"
summary "Runfile tasks for building the Nicetrace gem"
version Nicetrace::VERSION

RunfileTasks::RubyGems.all 'nicetrace'
RunfileTasks::Testing.rspec

# Nicetrace.enable
Nicetrace.filter = /(ruby_executable_hooks|bin\/run|lib\/runfile)/

action :debug do
  FileUtils.rm 'no_such.file'
end

action :rescue do
  rescue_nicely Nicetrace.filter do 
    FileUtils.rm 'no_such.file'
  end
end
